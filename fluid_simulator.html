<!doctype html>
<html lang="pt">
<head>
<meta charset="utf-t"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Simulador de Fluidos</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="styleSheet" href="styles.css">
</head>
<body>

<div class="wrap">
  <div class="canvas-container">
    <canvas id="canvas"></canvas>
    <div id="recordProgress"></div>
    
    <div id="canvasTooltip" class="canvas-tooltip" style="display: none;"></div>
    <div class="canvas-overlay">
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-label">
            <svg class="icon" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm-1-5h2v2h-2zm0-8h2v6h-2z"/></svg>
            FPS
          </div>
          <div class="stat-value monospace-font" id="perfStats">--</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">
            <svg class="icon" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM4 18V6h2v12H4zm4 0V6h9v12H8z"/><path d="M10 8h5v2h-5z" fill="none"/></svg>
            Grid
          </div>
          <div class="stat-value monospace-font" id="resLabel"></div>
        </div>
        <div class="stat-item">
          <div class="stat-label">
            <svg class="icon" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z"/></svg>
            Modo
          </div>
          <div class="stat-value" id="currentMode">Densidade</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">
            <span class="status-indicator" id="statusIndicator"></span>
            Estado
          </div>
          <div class="stat-value" id="simState">Executando</div>
        </div>
      </div>
    </div>
    
    <div class="info-overlay" id="pressureInfo" style="display: none;">
      Análise de Pressão
      <hr style="margin: 8px 0;">
      <div style="font-size: 11px; display: grid; gap: 4px;">
        <div>Pressão Máx: <span id="maxPressure" class="monospace-font">--</span></div>
        <div>Pressão Mín: <span id="minPressure" class="monospace-font">--</span></div>
        <div>Pressão Média: <span id="avgPressure" class="monospace-font">--</span></div>
      </div>
    </div>
    
    <div class="info-overlay" id="temperatureInfo" style="display: none;">
      Análise de Temperatura
      <hr style="margin: 8px 0;">
      <div style="font-size: 11px; display: grid; gap: 4px;">
        <div>Temp. Máx: <span id="maxTemp" class="monospace-font">--</span></div>
        <div>Temp. Mín: <span id="minTemp" class="monospace-font">--</span></div>
        <div>Temp. Média: <span id="avgTemp" class="monospace-font">--</span></div>
      </div>
    </div>

    <div class="scale-overlay" id="colorScale" style="display: none;">
      <div style="font-weight: 600; font-size: 12px;" id="scaleTitle">Escala</div>
      <div class="color-bar"></div>
      <div class="scale-labels">
        <span id="minScale" class="monospace-font">Baixa</span>
        <span id="maxScale" class="monospace-font">Alta</span>
      </div>
    </div>
    
    <div class="control-buttons">
      <button id="pauseBtn" style="background-color: #1e1e1ecc; backdrop-filter: blur(10px); border-radius: 15px;">
        <svg class="icon" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
        Pausar
      </button>
      <button id="stepBtn" class="secondary" style="background-color: #1e1e1ecc; backdrop-filter: blur(10px); border-radius: 15px;">
        <svg class="icon" viewBox="0 0 24 24"><path d="M4 18l8.5-6L4 6v12zm9-12v12l8.5-6L13 6z"/></svg>
        Passo
      </button>
      <button id="resetBtn" class="tertiary" style="background-color: #1e1e1ecc; backdrop-filter: blur(10px); border-radius: 15px;">
        <svg class="icon" viewBox="0 0 24 24"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>
        Reiniciar
      </button>
    </div>
  </div>

  <div class="controls-container">
    <div class="panel">
      <div class="panel-header">Simulador de Fluidos</div>
      <small>Solver de fluidos baseado em Navier–Stokes incompressível com empuxo térmico</small>
    </div>
    
    <div class="panel">
      <div class="panel-header">
        <svg class="icon" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61-.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19-.15-.24-.42-.12-.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"/></svg>
        Parâmetros Físicos
      </div>
      
      <label>Número CFL Alvo: 
          <input id="dtRange" type="range" min="0.1" max="1.0" step="0.05" value="0.8"/> 
          <span id="dtVal" class="monospace-font"></span>
      </label>
      
      <label>Força de injeção: 
        <input id="injectRange" type="range" min="0" max="200" step="5" value="80"/> 
        <span id="injectVal" class="monospace-font"></span>
      </label>

      <label>Temperatura da Injeção (K): 
        <input id="injectTempRange" type="range" min="300" max="1000" step="10" value="500"/> 
        <span id="injectTempVal" class="monospace-font"></span>
      </label>
      
      <label>Viscosidade Base (Pa·s): 
        <input id="viscRange" type="range" min="0" max="0.0001" step="0.000001" value="0.000018"/> 
        <span id="viscVal" class="monospace-font"></span>
      </label>
      
      <label>Vorticidade (ε): 
        <input id="vortRange" type="range" min="0" max="0.5" step="0.01" value="0.15"/> 
        <span id="vortVal" class="monospace-font"></span>
      </label>
      
      <div style="display: flex; gap: 10px; margin-top: 10px;">
        <button id="toggleWind" style="flex-grow: 1;">Alternar Injetor</button>
        <input id="colorPicker" type="color" value="#007AFF" title="Cor do fluido injetado"/>
      </div>
      
      <hr/>
      <label>Gravidade (m/s²):
          <input id="gravityRange" type="range" min="0" max="20" step="0.1" value="9.8"/>
          <span id="gravityVal" class="monospace-font"></span>
      </label>
      <hr/>
      <label>Vento Constante (m/s):
          <input id="windSpeedRange" type="range" min="0" max="10" step="0.1" value="0"/>
          <span id="windSpeedVal" class="monospace-font"></span>
      </label>

    </div>

    <div class="panel">
      <div class="panel-header">
         <svg class="icon" viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
        Visualização & Cenário
      </div>
      
      <label>Modo de Visualização: 
        <select id="visModeSelect">
          <option value="density" selected>Densidade (Cor)</option>
          <option value="temperature">Temperatura</option>
          <option value="pressure">Pressão</option>
          <option value="vorticity">Vorticidade</option>
        </select>
      </label>

      <hr/>
      <small>Controle de Obstáculos</small>
      <div style="display: flex; gap: 10px; justify-content: space-between; margin-bottom: 16px;">
          <button id="addCircleBtn" style="flex: 1;">+ Círculo</button>
          <button id="addSquareBtn" style="flex: 1;">+ Quadrado</button>
          <button id="clearObstaclesBtn" class="tertiary" style="flex: 0;">Limpar</button>
      </div>

      <hr/>
      <label for="tempSensRange">Sensibilidade da Temperatura:
        <input id="tempSensRange" type="range" min="0.1" max="5" step="0.1" value="1">
        <span id="tempSensVal" class="monospace-font">1.0</span>
      </label>

      <label>Escala de Vorticidade: 
        <input id="vortSensRange" type="range" min="1" max="50" step="0.5" value="10"/> 
        <span id="vortSensVal" class="monospace-font">10</span>
      </label>
      
      <label>Sensibilidade de Pressão: 
        <input id="pressureSensRange" type="range" min="0.1" max="5.0" step="0.1" value="1.0"/> 
        <span id="pressureSensVal" class="monospace-font">1.0</span>
      </label>
      
      <hr/>
      <div class="checkbox-container">
        <input id="velToggle" type="checkbox"/>
        <label for="velToggle">Mostrar vetores de velocidade</label>
      </div>
      <div class="checkbox-container">
        <input id="trailToggle" type="checkbox" checked/>
        <label for="trailToggle">Rastros (efeito de fade)</label>
      </div>
      <div class="checkbox-container">
        <input id="pressureContours" type="checkbox"/>
        <label for="pressureContours">Contornos de pressão</label>
      </div>
    </div>
    
    <div class="panel">
      <div class="panel-header">
        <svg class="icon" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19.5,9.5c-1.03,0-1.9,0.62-2.29,1.5H12V3H3v8h1.5v2H3v8h9v-8h5.21c0.39,0.88,1.26,1.5,2.29,1.5c1.38,0,2.5-1.12,2.5-2.5 S20.88,9.5,19.5,9.5z M10.5,17.5H4.5v-5h6V17.5z M10.5,9.5H4.5v-5h6V9.5z"/></svg>
        Gravação e Análise
      </div>
      <label for="recordDurationInput" style="justify-content: flex-start; gap: 8px;">Duração da Gravação (s):</label>
      <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">
        <input id="recordDurationInput" type="number" value="5" min="1" max="60" class="input-number-styled" style="width: 70px; padding: 6px 8px; font-family: 'Roboto Mono', monospace;">
        <span class="monospace-font">segundos</span>
      </div>
      <label for="recordFrequencyInput" style="justify-content: flex-start; gap: 8px; margin-top: 12px;">Frequência de Amostragem (Hz):</label>
      <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">
        <input id="recordFrequencyInput" type="number" value="20" min="1" max="100" class="input-number-styled" style="width: 70px; padding: 6px 8px; font-family: 'Roboto Mono', monospace;">
        <span class="monospace-font">amostras/seg</span>
      </div>
      <button id="recordBtn">
        <svg class="icon" viewBox="0 0 24 24"><path fill="currentColor" d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4Z"></path></svg>
        Iniciar Gravação
      </button>
      <div id="reportContainer" style="margin-top: 12px; font-size: 13px;"></div>
      
      <hr>
      <div class="panel-header" style="margin-bottom: 12px;">
        <svg class="icon" viewBox="0 0 24 24"><path fill="currentColor" d="M13.5 8H12v5l4.28 2.54l.72-1.21l-3.5-2.08V8M13 3a9 9 0 0 0-9 9H1l3.89 3.89l.07.14L9 12H6a7 7 0 0 1 7-7a7 7 0 0 1 7 7a7 7 0 0 1-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42A8.954 8.954 0 0 0 13 21a9 9 0 0 0 9-9a9 9 0 0 0-9-9Z"></path></svg>
        Histórico de Gravações
      </div>
      <ul id="recordingHistoryList" class="history-list">
        </ul>
      </div>

    <div class="panel">
      <div class="panel-header">
        <svg class="icon" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z"/></svg>
        Guia de Interação
      </div>
      <ul>
        <li><b>Pausar & Passar o Mouse:</b> Inspecionar valores do fluido no local do cursor.</li>
        <li><b>Clique Esquerdo & Arrastar:</b> Adicionar jatos de fumaça.</li>
        <li><b>Shift + Arrastar:</b> Criar uma rajada de vento para empurrar o fluido.</li>
        <li><b>Ctrl + Arrastar:</b> Criar um dreno para sugar e remover o fluido.</li>
        <li><b>Arrastar Obstáculo:</b> Mover a forma sólida.</li>
        <li><b>Roda do Mouse no Obstáculo:</b> Redimensionar.</li>
      </ul>
    </div>

    <div class="panel">
      <div class="panel-header">
        <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
          <path d="M7 2h10v2h-1v6.5l4.9 8.5A2 2 0 0 1 19.2 22H4.8a2 2 0 0 1-1.7-3L8 10.5V4H7V2zm3 2v6.9l-5.1 8.8h14.2L14 10.9V4h-4z"/>
        </svg>
        Confiabilidade de Simulação
      </div>

      <small>
        Este simulador é adequado para estudos qualitativos em cenários físicos básicos,
        mas possui limitações quando aplicado em contextos de engenharia preditiva.
      </small>

      <h4 style="margin-top: 12px; margin-bottom: 6px; color: var(--success-color); font-size: 0.9rem;">
        ✔ Realista em primeira ordem para estudar:
      </h4>
      <ul>
        <li>Estruturas e interação de <b>vórtices</b></li>
        <li><b>Empuxo</b> por diferença de temperatura</li>
        <li>Efeitos de <b>obstáculos</b> no escoamento</li>
        <li>Ventilação natural e <b>convecção térmica</b></li>
        <li>Variação de <b>viscosidade, gravidade</b> e <b>injeção</b></li>
      </ul>

      <h4 style="margin-top: 16px; margin-bottom: 6px; color: var(--error-color); font-size: 0.9rem;">
        ✘ Limitações e não aplicável em:
      </h4>
      <ul>
        <li><b>Simplificações</b> → incompressível, semi-Lagrangiano, ρ constante em partes</li>
        <li><b>Termos artificiais</b> → confinamento de vorticidade (visual, não físico)</li>
        <li><b>Limitações numéricas</b> → grade colocalizada e baixa resolução</li>
        <li><b>CFD industrial</b> → não é adequado para engenharia preditiva</li>
      </ul>
      <hr style="margin: 16px 0;">
      <small>
        <ul><b>Fontes confiáveis para estudo:</b><br>
          🔗 <a href="https://www.dgp.toronto.edu/public_user/stam/reality/Research/pdf/GDC03.pdf" target="_blank" rel="noopener" style="color:gray; text-decoration: none;">
            Jos Stam – Stable Fluids (1999)
          </a><br>
          🔗 <a href="https://web.mit.edu/hml/ncfmf.html" target="_blank" rel="noopener" style="color:gray; text-decoration: none;">
            MIT – Numerical Computation of Fluid Mechanics
          </a><br>
          🔗 <a href="https://royalsocietypublishing.org/doi/full/10.1098/rspa.2023.0058" target="_blank" rel="noopener" style="color:gray; text-decoration: none;">
            Deep-learning methods for the simulation of fluid dynamics - article by Mario Lino
          </a>
        </ul>
      </small>
    </div>
  </div>
</div>

<div id="reportModal" class="modal-overlay" style="display: none;">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Relatório da Simulação</h2>
      <button id="closeReportBtn" class="close-button">&times;</button>
    </div>
    <div class="modal-tabs">
        <a class="tab-link active" data-tab="summary">Resumo</a>
        <a class="tab-link" data-tab="charts">Análise Gráfica</a>
        <a class="tab-link" data-tab="correlations">Correlações</a>
        <a class="tab-link" data-tab="data">Dados Brutos</a>
    </div>
    <div class="modal-body">
      
      <div id="tab-summary" class="modal-tab-content active">
          <h3>Visão Geral da Gravação</h3>
          <div class="summary-grid">
            <div class="summary-card">
              <div class="metric-header">
                <svg class="icon" viewBox="0 0 24 24"><path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61-.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19-.15-.24-.42-.12-.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"/></svg>
                Parâmetros da Simulação
              </div>
              <ul id="paramsList">
                </ul>
            </div>
            
            <div class="summary-card">
              <div class="metric-header">
                <svg class="icon" viewBox="0 0 24 24"><path d="M5 9.2h3V19H5zM10.6 5h2.8v14h-2.8zm5.6 8H19v6h-2.8z"/></svg>
                Estatísticas Agregadas
              </div>
              <ul id="statsList">
                </ul>
            </div>
          </div>
      </div>
      <div id="tab-charts" class="modal-tab-content">
         <h3>Análise Temporal das Métricas</h3>
         <div class="chart-controls">
            <div class="checkbox-container">
                <input id="logScaleToggle" type="checkbox"/>
                <label for="logScaleToggle">Usar Escala Logarítmica (Eixo Y)</label>
            </div>
            <div class="checkbox-container">
                <input id="movingAverageToggle" type="checkbox"/>
                <label for="movingAverageToggle">Mostrar Média Móvel (5p)</label>
            </div>
         </div>
         <div id="chartsGrid" class="charts-grid-container">
            </div>

         <hr>
         <h3>Análise Comparativa / Composta</h3>
         <div id="custom-chart-controls">
            </div>
         <div id="chartsGridCustom" class="charts-grid-container">
            <div id="custom-chart-wrapper" class="chart-wrapper">
                <canvas id="customChartCanvas"></canvas>
            </div>
         </div>
      </div>

      <div id="tab-correlations" class="modal-tab-content">
          <div id="analysisGrid" class="analysis-grid">
              </div>
      </div>

      <div id="tab-data" class="modal-tab-content">
        <h3>Dados Brutos da Simulação</h3>
        <div class="data-table-controls">
            <label for="tableSearchInput" style="margin:0; justify-content: flex-start; gap: 8px;">Filtrar dados:</label>
            <input id="tableSearchInput" type="search" placeholder="Buscar em qualquer coluna..."/>
        </div>
        <div class="table-container">
          <table id="reportTable">
            <thead></thead>
            <tbody></tbody>
          </table>
        </div>
      </div>

    </div>
    <div class="modal-footer">
       <button id="downloadPdfBtn">
            <svg class="icon" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8.5 7.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5.67-1.5 1.5-1.5 1.5.67 1.5 1.5zm5 3H10v-1h6.5v1zm0-3H10v-1h6.5v1zm-3.25-3H10V5h3.25v1.5zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6z"/></svg>
            Baixar como PDF
       </button>
       <button id="downloadCsvBtn">
            <svg class="icon" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg>
            Baixar Dados (CSV)
       </button>
    </div>
  </div>
</div>

<div id="pdfOptionsModal" class="modal-overlay" style="display: none;">
  <div class="modal-content" style="max-width: 500px;">
    <div class="modal-header">
      <h2>Selecionar Conteúdo do PDF</h2>
      <button id="closePdfOptionsBtn" class="close-button">&times;</button>
    </div>
    <div class="modal-body">
      <p style="margin-top:0; color: var(--text-secondary);">Escolha as seções do relatório que você deseja incluir no arquivo PDF.</p>
      <div id="pdf-options-body">
        <div class="checkbox-container">
          <input id="pdf-option-summary" type="checkbox" checked>
          <label for="pdf-option-summary">Resumo e Parâmetros</label>
        </div>
        <div class="checkbox-container">
          <input id="pdf-option-charts" type="checkbox" checked>
          <label for="pdf-option-charts">Análise Gráfica</label>
        </div>
        <div class="checkbox-container">
          <input id="pdf-option-data" type="checkbox" checked>
          <label for="pdf-option-data">Tabela de Dados Brutos</label>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button id="cancelPdfOptionsBtn" class="tertiary">Cancelar</button>
      <button id="confirmPdfDownloadBtn">Confirmar e Baixar</button>
    </div>
  </div>
</div>

<div id="csvOptionsModal" class="modal-overlay" style="display: none;">
  <div class="modal-content" style="max-width: 600px;">
    <div class="modal-header">
      <h2>Selecionar Colunas para o CSV</h2>
      <button id="closeCsvOptionsBtn" class="close-button">&times;</button>
    </div>
    <div class="modal-body">
      <p style="margin-top:0; color: var(--text-secondary);">Escolha quais colunas (métricas) você deseja incluir no arquivo CSV.</p>
      <div id="csv-options-body">
        </div>
    </div>
    <div class="modal-footer">
      <button id="cancelCsvOptionsBtn" class="tertiary">Cancelar</button>
      <button id="confirmCsvDownloadBtn">Confirmar e Baixar</button>
    </div>
  </div>
</div>


<script src="script.js"></script>
</body>
</html>